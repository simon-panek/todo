(this["webpackJsonpdemo-context-api"]=this["webpackJsonpdemo-context-api"]||[]).push([[0],{165:function(e,t,n){e.exports=n(313)},169:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},197:function(e,t){},199:function(e,t){},213:function(e,t){},215:function(e,t){},243:function(e,t){},245:function(e,t){},246:function(e,t){},251:function(e,t){},253:function(e,t){},259:function(e,t){},261:function(e,t){},280:function(e,t){},292:function(e,t){},295:function(e,t){},313:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(25),r=n.n(c),l=n(9),u=n(26),i=n(15),s=n(157),m=(n(86),n(169),n(83)),f=function(e){var t=Object(a.useState)({}),n=Object(l.a)(t,2),o=n[0],c=n[1];return[function(e){c(Object(m.a)(Object(m.a)({},o),{},Object(u.a)({},e.target.name,e.target.value)))},function(t){console.log("INSIDE HandleSubmit Hook",o),t.preventDefault(),t.target.reset(),e(o),c({})},o]},d=function(e){var t,n=f((function(t){console.log("INSIDE todoItem",t),e.sendTodo(t)})),a=Object(l.a)(n,2),c=a[0],r=a[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,{id:"form",onSubmit:r},o.a.createElement("h3",null,"Add Item"),o.a.createElement(i.a.Group,{controlId:"formGroupEmail"},o.a.createElement(i.a.Label,null,"To Do Item"),o.a.createElement(i.a.Control,(t={"data-testid":"todoItem",type:"text",placeholder:"Item Details",name:"text"},Object(u.a)(t,"placeholder","Add To Do List Item"),Object(u.a)(t,"onChange",c),t))),o.a.createElement(i.a.Group,{controlId:"formGroupPassword"},o.a.createElement(i.a.Label,null,"Assigned To"),o.a.createElement(i.a.Control,{"data-testid":"assignee",placeholder:"Assignee Name",type:"text",name:"assignee",onChange:c})),o.a.createElement(i.a.Group,{controlId:"formBasicRange"},o.a.createElement(i.a.Control,{"data-testid":"slider",type:"range",defaultValue:"1",min:"1",max:"5",name:"difficulty",onChange:c})),o.a.createElement(s.a,{"data-testid":"submit",variant:"primary",type:"submit"},"Add Item")))},p=(n(173),n(158)),b=n(159),h=n(164),E=n(162),v=o.a.createContext(),g=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={maxDisplay:4,sortMethod:"assignee",hide:!0},a}return Object(b.a)(n,[{key:"render",value:function(){return o.a.createElement(v.Provider,{value:this.state},this.props.children)}}]),n}(o.a.Component),j=function(e){var t=Object(a.useContext)(v),n=Object(a.useState)([]),c=Object(l.a)(n,2),r=c[0],u=c[1],i=e.list.slice(0,t.maxDisplay),s=Object(a.useState)([]),m=Object(l.a)(s,2),f=m[0],d=m[1];Object(a.useEffect)((function(){p(),d(i)}),[e.list]);var p=function(){for(var n=[],a=Math.ceil(e.list.length/t.maxDisplay),c=1;c<=a;c++)n.push(o.a.createElement("button",{key:c,name:c,onClick:b},"Page ",c));u([n])},b=function(n){var a=n.target.name,o=e.list.slice((a-1)*t.maxDisplay,t.maxDisplay+(a-1)*t.maxDisplay);d(o)};return o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",null,f.map((function(t){return o.a.createElement("li",{"data-testid":"list-item",className:"complete-".concat(t.complete.toString()),key:t._id},o.a.createElement("span",{id:"listSpan",onClick:function(){return e.handleComplete(t._id)}},t.text," -- ",t.assignee),o.a.createElement("button",{id:"deleteButton",type:"submit",onClick:function(){return e.handleDelete(t._id)}},"X"))}))),o.a.createElement("div",null,r))},O=(n(174),n(175),n(163)),y=n(87),x="https://api-js401.herokuapp.com/api/v1/todo",k=function(){var e=Object(a.useContext)(v),t=Object(a.useState)([]),n=Object(l.a)(t,2),o=n[0],c=n[1];Object(a.useEffect)((function(){o.sort((function(t,n){return t[e.sortMethod]>n[e.sortMethod]?1:-1})),c(o)}));var r=function(){y.get(x).then((function(e){var t=e.data.results;c(t)})).catch(console.error)};return[o,function(e){e.due=new Date,y.post(x,{assignee:e.assignee,complete:!1,difficulty:e.difficulty,text:e.text,__v:0}).then((function(e){var t=e.data;c([].concat(Object(O.a)(o),[t]))})).catch(console.error)},function(e){var t=o.filter((function(t){return t._id===e}))[0]||{};if(t._id){t.complete=!t.complete;var n="".concat(x,"/").concat(e);y.put(n,{complete:t.complete}).then((function(e){console.log({response:e}),c(o.map((function(n){return n._id===t._id?e.data:n})))})).catch(console.error)}},function(e){if((o.filter((function(t){return t._id===e}))[0]||{})._id){var t="".concat(x,"/").concat(e);y.delete(t).then((function(){return r()})).catch(console.error)}},r]},C=function(){var e=k(),t=Object(l.a)(e,5),n=t[0],c=t[1],r=t[2],u=t[3],i=t[4];Object(a.useEffect)(i,[]);var s=Object(a.useState)([]),m=Object(l.a)(s,2),f=m[0],p=m[1];Object(a.useEffect)((function(){var e="There are ".concat(n.filter((function(e){return!e.complete})).length," Items To Complete");p(e)}),[n]);var b=Object(a.useState)(document.title),h=Object(l.a)(b,2),E=(h[0],h[1]);return Object(a.useEffect)((function(){var e="Todo: ".concat(n.filter((function(e){return!e.complete})).length," / Done: ").concat(n.filter((function(e){return e.complete})).length);return E(e),function(){document.title=e}})),o.a.createElement(o.a.Fragment,null,o.a.createElement("header",null,o.a.createElement("h2",{id:"countH2"},f)),o.a.createElement("section",{className:"todo"},o.a.createElement("div",null,o.a.createElement(d,{sendTodo:c})),o.a.createElement("div",null,o.a.createElement(j,{list:n,handleComplete:r,handleDelete:u}))))},I=n(56),S=n(84),D=(n(193),n(160)),_=n.n(D),T=n(161),w=n.n(T),N=(n(87),o.a.createContext());var B=function(e){var t=Object(a.useState)({}),n=Object(l.a)(t,2),c=n[0],r=n[1],u=Object(a.useState)(!1),i=Object(l.a)(u,2),s=i[0],m=i[1],f=function(e){try{console.log("IN Validate Token ",{token:e});var t=_.a.verify(e,"goldfish");console.log("user2",{user:t}),d(!0,e,t)}catch(n){d(!1,null,{})}};console.log({loggedIn:s});var d=function(e,t,n){w.a.save("auth",t),m(!0),r(n)},p={user:c,loggedIn:s,login:function(e,t){fetch("".concat("https://simonpanek-auth-api.herokuapp.com","/signin"),{method:"post",mode:"cors",cache:"no-cache",headers:new Headers({Authorization:"Basic ".concat(btoa("".concat(e,":").concat(t)))})}).then((function(e){return e.json()})).then((function(e){console.log("user.token",e.token),f(e.token)}))}};return o.a.createElement(N.Provider,{value:p},e.children)};var A=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],r=n[1],u=Object(a.useState)(""),i=Object(l.a)(u,2),s=i[0],m=i[1],f=Object(a.useState)(""),d=Object(l.a)(f,2),p=d[0],b=d[1],h=Object(a.useState)("user"),E=Object(l.a)(h,2),v=E[0],g=E[1],j=Object(a.useContext)(N);return console.log({userName:c},{password:s},{email:p},{role:v}),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),j.login(c,s,p)}},o.a.createElement("input",{onBlur:function(e){r(e.target.value)},type:"text",name:"name",placeholder:"Name"}),o.a.createElement("input",{onBlur:function(e){m(e.target.value)},type:"password",name:"password",placeholder:"Password"}),o.a.createElement("input",{onBlur:function(e){b(e.target.value)},type:"email",name:"email",placeholder:"Email"}),o.a.createElement("label",null,"Role"),o.a.createElement("select",{onChange:function(e){g(e.target.value)}},o.a.createElement("option",{value:"user"},'"user"'),o.a.createElement("option",{value:"editor"},'"editor"'),o.a.createElement("option",{value:"admin"},'"admin"')),o.a.createElement("button",null,"Enter"))},G=function(e){return o.a.createElement(I.a,{bg:"dark",variant:"dark",expand:"sm"},o.a.createElement(I.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(I.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(S.a,{className:"mr-auto"},o.a.createElement(S.a.Link,{href:"#home"},"Home"))),o.a.createElement(A,null))},H=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(B,null,o.a.createElement(G,null),o.a.createElement(g,null,o.a.createElement(C,null))))},P=function(){return o.a.createElement(H,null)},F=document.getElementById("root");r.a.render(o.a.createElement(P,null),F)}},[[165,1,2]]]);
//# sourceMappingURL=main.5f691ef4.chunk.js.map